Version 4
SHEET 1 880 680
WIRE 224 16 176 16
WIRE 352 16 304 16
WIRE -464 112 -464 80
WIRE 0 144 -112 144
WIRE 176 144 176 16
WIRE 176 144 80 144
WIRE 240 144 176 144
WIRE 352 160 352 16
WIRE 352 160 304 160
WIRE 448 160 352 160
WIRE 240 176 176 176
WIRE -112 208 -112 144
WIRE -464 224 -464 192
WIRE -464 224 -528 224
WIRE -528 240 -528 224
WIRE 176 240 176 176
WIRE -464 256 -464 224
WIRE -288 256 -336 256
WIRE -176 256 -208 256
WIRE 176 256 176 240
WIRE 448 256 448 160
WIRE -336 304 -336 256
WIRE -464 368 -464 336
WIRE -336 432 -336 384
WIRE -112 432 -112 304
WIRE -112 432 -336 432
WIRE 176 432 176 320
WIRE 176 432 -112 432
WIRE 448 432 448 336
WIRE 448 432 176 432
WIRE 176 448 176 432
FLAG -528 240 0
FLAG -464 80 Vp
IOPIN -464 80 In
FLAG -464 368 Vm
IOPIN -464 368 In
FLAG 272 128 Vp
IOPIN 272 128 Out
FLAG 272 192 Vm
IOPIN 272 192 Out
FLAG 176 448 0
FLAG -336 256 Vctrl
FLAG 176 176 Vin
FLAG 448 160 Vout
SYMBOL OpAmps\\UniversalOpAmp 272 160 R0
SYMATTR InstName U1
SYMBOL res 464 352 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName RL
SYMATTR Value 100k
SYMBOL voltage -464 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage -464 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL voltage -336 288 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(-1 1 0 1ns 1ns 0.25 0.5)
SYMBOL voltage 176 224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value SINE(0 1 8)
SYMBOL res 320 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res 96 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL res -192 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R
SYMATTR Value 1k
SYMBOL npn -176 208 R0
SYMATTR InstName Q1
TEXT -512 504 Left 2 !.tran 0 1s 0s
